<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CrushersCafe | Secret Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #0a0a0a; color: white; padding: 20px; }
        .container { max-width: 900px; margin: auto; }
        h2 { color: #D4AF37; text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #111; }
        th, td { border: 1px solid #333; padding: 12px; text-align: left; font-size: 0.9rem; }
        th { background: #222; color: #D4AF37; }
        tr:nth-child(even) { background: #151515; }
        .refresh-btn { background: #D4AF37; color: black; border: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; cursor: pointer; display: block; margin: 20px auto; }
    </style>
</head>
<body onload="checkAccess()">
    <div class="container">
        <h2>ðŸ“‹ Live Customer Orders - Ajmer</h2>
        <button class="refresh-btn" onclick="fetchData()">ðŸ”„ Refresh Data</button>
        <div id="loading" style="text-align:center;">Loading orders...</div>
        <table id="orderTable" style="display:none;">
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>Customer Name</th>
                    <th>Phone</th>
                    <th>Items</th>
                    <th>Total Bill</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>

    <script>
        // Password Protection
        function checkAccess() {
            var pass = prompt("Enter Secret Admin Password:");
            if (pass === "Google 127") {
                fetchData();
            } else {
                alert("Wrong Password! Gussa thook do.");
                window.location.href = "index.html"; // Wapas menu par bhejne ke liye
            }
        }

        // Naya Secret Jugad
async function openAdmin() {
    var pass = prompt("CrushersCafe Secret Password:");
    if (pass === "Google 127") {
        // Ye code Google Sheet se data khinch kar ek 'Pop-up' mein dikha dega
        const sheetID = "1vQo6fW_A67T0Oqf6S_vSrkS7E_S6clsmqF0IWNAmF0RkG1CTMeWU7Aw";
        const jsonURL = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?tqx=out:json`;
        
        try {
            const res = await fetch(jsonURL);
            const text = await res.text();
            const data = JSON.parse(text.substr(47).slice(0, -2));
            
            let html = `<div id='secretPanel' style='position:fixed; top:0; left:0; width:100%; height:100%; background:#000; color:#fff; z-index:9999; padding:20px; overflow:auto;'>
                <h2 style='color:#D4AF37;'>ðŸ“‹ Aaj Ke Orders (Ajmer)</h2>
                <button onclick="document.getElementById('secretPanel').remove()" style='background:#D4AF37; padding:10px; border:none; margin-bottom:20px;'>Close Panel</button>
                <table border='1' style='width:100%; border-collapse:collapse; background:#111;'>
                    <tr style='color:#D4AF37;'><th>Cust</th><th>Phone</th><th>Items</th><th>Bill</th></tr>`;
            
            data.table.rows.forEach(r => {
                html += `<tr>
                    <td>${r.c[1] ? r.c[1].v : '-'}</td> <td>${r.c[2] ? r.c[2].v : '-'}</td> <td>${r.c[4] ? r.c[4].v : '-'}</td> <td>â‚¹${r.c[5] ? r.c[5].v : '0'}</td> </tr>`;
            });
            html += `</table></div>`;
            document.body.insertAdjacentHTML('beforeend', html);
        } catch (e) {
            alert("Sheet Share 'Anyone' par set karein!");
        }
    } else {
        alert("Ghalat Password! Gussa thook do.");
    }
}
    </script>
</body>
</html>
