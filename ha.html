<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Royal Cafe Admin Panel</title>
<style>
body{margin:0;font-family:Arial;background:#f2f2f2;}
header{background:#e23744;color:white;padding:15px;text-align:center;font-size:24px;font-weight:bold;}
.container{display:flex;min-height:80vh;flex-wrap:wrap;}
.sidebar{width:220px;background:#fff;margin:15px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.1);padding:15px;flex-shrink:0;}
.main{flex:1;margin:15px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.1);background:#fff;padding:15px;min-width:300px;}
.card{padding:10px;border-radius:8px;margin-bottom:10px;background:#f8f8f8;display:flex;justify-content:space-between;align-items:center;}
input,select,button{padding:6px;margin:5px 0;border-radius:5px;border:1px solid #ccc;}
button{background:#e23744;color:white;border:none;cursor:pointer;margin-left:5px;}
#successMessage{position:fixed;top:20px;right:20px;background:#4CAF50;color:white;padding:10px 15px;border-radius:5px;display:none;opacity:0;transition:0.5s;}
@media(max-width:900px){.container{flex-direction:column;}.sidebar{width:100%;}}
</style>
</head>
<body>

<header>Royal Cafe Admin Panel</header>

<!-- Login Form -->
<div id="loginDiv" style="max-width:400px;margin:40px auto;padding:20px;background:#fff;border-radius:10px;">
<h3>Admin Login</h3>
<input id="adminUser" placeholder="Username">
<input id="adminPass" type="password" placeholder="Password">
<button onclick="adminLogin()">Login</button>
</div>

<!-- Dashboard -->
<div id="adminDashboard" style="display:none;">
<div style="text-align:right;margin:10px;"><button onclick="adminLogout()">Logout</button></div>
<div class="container">
<div class="sidebar">
<h3>Categories</h3>
<div id="adminCategories"></div>
<input id="newCategory" placeholder="New Category">
<button onclick="addCategory()">Add Category</button>

<h3>Subcategories</h3>
<select id="selectCategoryForSubcat"></select>
<input id="newSubcategory" placeholder="New Subcategory">
<button onclick="addSubcategory()">Add Subcategory</button>
</div>

<div class="main">
<h3>Items</h3>
<select id="selectCategoryForItem"></select>
<select id="selectSubcategoryForItem"></select>
<input id="newItemName" placeholder="Item Name">
<input id="newItemPrice" type="number" placeholder="Price">
<button onclick="addItem()">Add Item</button>
<div id="adminManage"></div>
</div>
</div>
</div>

<div id="successMessage"></div>

<script>
const ADMIN_USERNAME="admin";
const ADMIN_PASSWORD="1234";

// Load menuData from localStorage or default
let menuData = JSON.parse(localStorage.getItem("menuData")) || {Coffee:{Morning:[],Evening:[]},Tea:{Masala:[],Lemon:[]}};

// Show temporary success message
function showMessage(msg){
  const d=document.getElementById("successMessage");
  d.innerText=msg;
  d.style.display="block";
  d.style.opacity="1";
  setTimeout(()=>{d.style.opacity="0";setTimeout(()=>{d.style.display="none";},500)},2000);
}

// Login function
function adminLogin(){
  let u=document.getElementById("adminUser").value;
  let p=document.getElementById("adminPass").value;
  if(u===ADMIN_USERNAME && p===ADMIN_PASSWORD){
    document.getElementById("loginDiv").style.display="none";
    document.getElementById("adminDashboard").style.display="block";
    showMessage("Login Successful ✅");
    loadDashboard();
  } else showMessage("Invalid credentials ❌");
}

// Logout
function adminLogout(){
  document.getElementById("loginDiv").style.display="block";
  document.getElementById("adminDashboard").style.display="none";
  showMessage("Logged out ✅");
}

// Dashboard
function loadDashboard(){
  loadCategories();
  renderManage();
}

// Load categories in sidebar & dropdowns
function loadCategories(){
  const cdiv=document.getElementById("adminCategories");
  const sCat=document.getElementById("selectCategoryForItem");
  const sSub=document.getElementById("selectCategoryForSubcat");
  cdiv.innerHTML=""; sCat.innerHTML=""; sSub.innerHTML="";
  for(let cat in menuData){
    // Sidebar
    let div=document.createElement("div");
    div.className="card";
    div.innerText=cat;
    cdiv.appendChild(div);
    // Dropdowns
    let opt=document.createElement("option");
    opt.value=cat; opt.innerText=cat;
    sCat.appendChild(opt);
    sSub.appendChild(opt.cloneNode(true));
  }
  renderSubcategories(sCat.value);
}

// Render subcategories for selected category
function renderSubcategories(cat){
  const sub=document.getElementById("selectSubcategoryForItem");
  sub.innerHTML="";
  if(!menuData[cat]) return;
  for(let s in menuData[cat]){
    let o=document.createElement("option");
    o.value=s; o.innerText=s;
    sub.appendChild(o);
  }
}

// Save to localStorage
function saveData(){
  localStorage.setItem("menuData", JSON.stringify(menuData));
  showMessage("Saved ✅");
  loadDashboard();
}

// Add Category
function addCategory(){
  let n=document.getElementById("newCategory").value.trim();
  if(!n) return showMessage("Enter category");
  if(menuData[n]) return showMessage("Already exists");
  menuData[n]={};
  document.getElementById("newCategory").value="";
  saveData();
}

// Add Subcategory
function addSubcategory(){
  let cat=document.getElementById("selectCategoryForSubcat").value;
  let s=document.getElementById("newSubcategory").value.trim();
  if(!s) return showMessage("Enter subcategory");
  if(menuData[cat][s]) return showMessage("Already exists");
  menuData[cat][s]=[];
  document.getElementById("newSubcategory").value="";
  saveData();
}

// Add Item
function addItem(){
  let cat=document.getElementById("selectCategoryForItem").value;
  let sub=document.getElementById("selectSubcategoryForItem").value;
  let n=document.getElementById("newItemName").value.trim();
  let p=parseFloat(document.getElementById("newItemPrice").value);
  if(!n || !p) return showMessage("Enter name & price");
  menuData[cat][sub].push({name:n,price:p});
  document.getElementById("newItemName").value="";
  document.getElementById("newItemPrice").value="";
  saveData();
  renderManage();
  showMessage("Item added ✅");
}

// Render all items
function renderManage(){
  const c=document.getElementById("adminManage");
  c.innerHTML="";
  for(let cat in menuData){
    for(let sub in menuData[cat]){
      menuData[cat][sub].forEach((item,i)=>{
        let d=document.createElement("div");
        d.className="card";
        let t=document.createElement("span");
        t.innerText=`${cat} > ${sub} > ${item.name} - ₹${item.price}`;
        let b=document.createElement("button");
        b.innerText="Delete";
        b.onclick=()=>deleteItem(cat,sub,i);
        d.appendChild(t); d.appendChild(b);
        c.appendChild(d);
      });
    }
  }
}

// Delete item
function deleteItem(cat,sub,i){
  if(confirm("Delete item?")){
    menuData[cat][sub].splice(i,1);
    saveData();
    renderManage();
  }
}
</script>
</body>
</html>
